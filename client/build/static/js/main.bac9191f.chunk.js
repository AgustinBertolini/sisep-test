(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){e.exports=a(202)},133:function(e,t,a){},135:function(e,t,a){},139:function(e,t,a){},159:function(e,t){},161:function(e,t){},198:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(105),o=a.n(i),c=(a(133),a(135),a(1)),l=a.n(c),s=a(4),u=a(14),d=a(20),m=a(39),p=a(51),f=(a(139),a(58)),g=a(118),b=a(87),v=a.n(b),h=Object(n.createContext)(),E=function(e){var t=e.children,a=(new URLSearchParams(window.location.search).get("guid"),Object(g.a)("https://sisep-video-chat-app.herokuapp.com")),i=Object(n.useState)(null),o=Object(u.a)(i,2),c=o[0],l=o[1],s=Object(n.useState)({}),d=Object(u.a)(s,2),m=d[0],p=d[1],f=Object(n.useState)({}),b=Object(u.a)(f,2),E=b[0],O=b[1],w=Object(n.useState)(!1),j=Object(u.a)(w,2),y=j[0],x=j[1],S=Object(n.useState)(!1),I=Object(u.a)(S,2),C=I[0],k=I[1],N=Object(n.useState)(""),T=Object(u.a)(N,2),z=T[0],A=T[1],D=Object(n.useState)(""),F=Object(u.a)(D,2),P=F[0],R=F[1],_=Object(n.useState)(""),L=Object(u.a)(_,2),M=L[0],U=L[1],V=Object(n.useState)([]),B=Object(u.a)(V,2),H=(B[0],B[1]),J=Object(n.useRef)(),q=Object(n.useRef)(),G=Object(n.useRef)();Object(n.useEffect)(function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(e){l(e)}),a.on("me",function(e){return p(e)}),a.on("users",function(e){return H(e)}),a.on("calluser",function(e){var t=e.signal,a=e.from,n=e.name;O({isReceivingCall:!0,from:a,name:n,signal:t})})},[]),Object(n.useEffect)(function(){J.current&&(J.current.srcObject=c)},[c]);return r.a.createElement(h.Provider,{value:{call:E,callAccepted:y,callEnded:C,myVideo:J,userVideo:q,stream:c,name:z,setName:A,interviewedName:P,setInterviewedName:R,me:m,callUser:function(e){var t=new v.a({initiator:!0,trickle:!1,stream:c});t.on("signal",function(e){a.emit("calluser",{userToCall:"",signalData:e,from:m,name:z})}),t.on("stream",function(e){q.current.srcObject=e}),a.on("callended",function(){k(!0)}),a.on("callaccepted",function(e){x(!0),R(z),t.signal(e)}),G.current=t},leaveCall:function(){a.emit("callended"),k(!0),G.current.destroy(),window.location.reload()},answercall:function(e){x(!0);var t=new v.a({initiator:!1,trickle:!1,stream:c});t.on("signal",function(e){a.emit("answercall",{signal:e,to:E.from})}),t.on("stream",function(e){q.current.srcObject=e}),t.signal(E.signal),G.current=t},textAreaCodeId:M,setTextAreaCodeId:U}},t)};m.b.add(p.c,p.a);var O,w,j,y,x=function(e){var t=e.message,a=e.messageName,n=e.date,i=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"divChatMessage",style:{justifyContent:a===i?"right":"left"}},r.a.createElement("div",{className:"divText"},r.a.createElement("div",null,r.a.createElement("span",{className:"spanName"},a)),r.a.createElement("span",null,t),r.a.createElement("div",{className:"divMessageTime"},r.a.createElement("span",null,"".concat(n.getHours().toString().padStart(2,"0"),":").concat(n.getMinutes().toString().padStart(2,"0"))),r.a.createElement(f.a,{className:"iconTime",icon:"fa-solid fa-clock",size:"sm"})))))},S=a(49),I=a(50),C=I.a.div(O||(O=Object(S.a)(["\n    display: flex;\n    align-items: flex-end;\n    flex-direction: column-reverse;\n    overflow-y: auto;\n    background-color: #f0f0f0;\n    border-color: #f2f2f2;\n"]))),k=I.a.div(w||(w=Object(S.a)(["\n    display: flex;\n    align-items: flex-end;\n    height: 5vh;\n    max-height: 5vh;\n    width: 98%;\n    border-color: #f2f2f2;\n"]))),N=I.a.input(j||(j=Object(S.a)(["\n    //border-color: 1px white !important;\n    border: 1px solid lightgray;\n    color: rgb(120, 120, 120) !important;\n    font-size: 0.8rem !important;\n    transition: 400ms !important;\n    margin-right: 0.25rem;\n    padding: 0.3rem;\n    width: 100%;\n\n    &:focus {\n        background-color: #f7f7f7 !important;\n        border-color: #acacac !important;\n        outline: 0 !important;\n        box-shadow: 0 0 0 0.15rem #ededed !important;\n    }\n"]))),T=Object(I.a)(f.a)(y||(y=Object(S.a)(["\n    color: #5797f5;\n    transition: all 500ms;\n    margin-bottom: 0.25rem;\n\n    &:hover {\n        color: #2d4f81;\n        cursor: pointer;\n    }\n"]))),z=a(88);a(204),a(170);a(101).config();var A=z.a.initializeApp({apiKey:"AIzaSyAAPNSJDfdktSZ2j-0vr_OeiNP5r1lc5fo",authDomain:"sisep-85cdb.firebaseapp.com",projectId:"sisep-85cdb",storageBucket:"sisep-85cdb.appspot.com",messagingSenderId:"393169712076",appId:"1:393169712076:web:2c6cac182fb9baa7bf6369",measurementId:"G-XKZL6FP4VT"}),D=(A.auth(),A.firestore()),F=(z.a.auth,a(13));m.b.add(p.b);var P=function(e){var t=e.isInterviewer,a=e.isCodeInterview,i=e.guidOdoo,o=e.interviewerName,c=e.interviewedName,d=Object(n.useContext)(h),m=d.callEnded,p=d.callAccepted,f=Object(n.useState)([]),g=Object(u.a)(f,2),b=g[0],v=g[1],E=Object(n.useState)(""),O=Object(u.a)(E,2),w=O[0],j=O[1],y=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===w){e.next=4;break}return e.next=3,D.collection("conversations").add({guid:i,message:w,date:F.k.fromDate(new Date),timestamp:F.k.toString(),isEntrevistador:t,name:t?o:c});case 3:j("");case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.collection("conversations").onSnapshot(function(e){return v(e.docs.filter(function(e){return e.data().guid===i}).sort(function(e,t){return t.data().date.seconds-e.data().date.seconds}).map(function(e){var t=e.data();return{guid:t.guid,date:new Date(1e3*t.date.seconds),timestamp:t.timestamp,isEntrevistador:t.isEntrevistador,message:t.message,name:t.name}}))});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){S()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{borderLeft:"1px solid #cbcbcb"}},r.a.createElement(C,{style:{height:a?"89vh":"95vh",maxHeight:a?"89vh":"95vh"}},b&&b.length>0&&b.map(function(e){return r.a.createElement(x,{key:e.timestamp,message:e.message,emisor:e.isEntrevistador,messageName:e.name,date:e.date,name:t?o:c})})),r.a.createElement(k,null,r.a.createElement(N,{type:"text",autoComplete:"off",placeholder:"Escriba un mensaje...",value:w,disabled:m||!p,onChange:function(e){return j(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&y()}}),r.a.createElement(T,{onClick:function(){return y()},icon:"fa-solid fa-circle-chevron-right",size:"lg"}))))},R=a(117),_=function(e){var t=e.guidOdoo,a=e.isInterviewer,i=Object(n.useContext)(h),o=i.textAreaCodeId,c=i.setTextAreaCodeId,d=i.callAccepted,m=Object(n.useState)("Ingrese su codigo aqui."),p=Object(u.a)(m,2),f=p[0],g=p[1],b=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Ingrese su codigo aqui."===f){e.next=8;break}if(!(o.length>0)){e.next=6;break}return e.next=4,D.collection("codes").doc(o).set({guid:t,code:f,date:F.k.fromDate(new Date)});case 4:e.next=8;break;case 6:return e.next=8,D.collection("codes").add({guid:t,code:f,date:F.k.fromDate(new Date)}).then(function(e){return c(e.id)});case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.collection("codes").onSnapshot(function(e){var a=e.docs.find(function(e){return e.data().guid===t&&""!==e.data().code});a&&(c(a.id),g(a.data().code))});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){v()},[]),Object(n.useEffect)(function(){b()},[f]),r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{value:f,language:"js",onBlur:function(e){return g(e.target.value)},disabled:a&&d,style:{fontSize:12,border:"1px solid lightgray",backgroundColor:"#efefef",marginBottom:"25%",minHeight:"100%",zIndex:500,fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"}}))},L=a(232),M=a(229),U=a(230),V=function(e){var t=e.open,a=(e.setOpen,e.guidOdoo),i=Object(n.useContext)(h).leaveCall,o=Object(n.useState)(0),c=Object(u.a)(o,2),m=c[0],p=c[1],f=Object(n.useState)(""),g=Object(u.a)(f,2),b=g[0],v=g[1],E=function(){var e=Object(s.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",SoeToken:"Cwf8tVGv674@"},body:JSON.stringify({status:"done",observations:b,result_attachment:"",score:m>=0&&m<=5?m.toString():"0"})},e.next=3,fetch("https://sisep.ovh001.eynes.com.ar/sisep/soe/interview/".concat(a),t);case 3:i();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(d.e,{isOpen:t,style:{paddingTop:"10%",zIndex:99999}},r.a.createElement(d.h,null,r.a.createElement(L.a,{fontSize:"0.8rem",fontWeight:"bold"},"Puntue la entrevista")),r.a.createElement(d.f,null,r.a.createElement(d.i,null,r.a.createElement(M.a,{name:"simple-controlled",value:m,onChange:function(e,t){p(t)},size:"large",sx:{".MuiSvgIcon-root":{fill:"yellow"}}}),r.a.createElement(L.a,{fontSize:"0.7rem"},"Indique el desempe\xf1o del candidato en una escala del 1 al 5 donde 1 es muy mala y 5 muy buena.")),r.a.createElement(d.i,{style:{marginTop:"1%"}},r.a.createElement(U.a,{"aria-label":"empty textarea",placeholder:"Observaciones",onChange:function(e){return v(e.target.value)},style:{width:"100%",height:"200px",borderColor:"lightgray"}}))),r.a.createElement(d.g,null,r.a.createElement(d.a,{color:"primary",onClick:function(){return E()}},"Finalizar entrevista")))},B=function(e){var t=e.isCodeInterview,a=e.isInterviewer,i=(e.showInitialModal,e.guidOdoo),o=e.interviewerName,c=e.interviewedName,m=Object(n.useContext)(h),p=(m.name,m.callAccepted),g=m.myVideo,b=m.userVideo,v=m.callEnded,E=m.stream,O=m.call,w=m.answercall,j=Object(n.useState)(!1),y=Object(u.a)(j,2),x=y[0],S=y[1],I=function(){var e=Object(s.a)(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(t),a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",SoeToken:"Cwf8tVGv674@"},body:JSON.stringify({status:"in_progress",observations:"Comenzo la entrevista",result_attachment:"",score:"0"})},e.next=4,fetch("https://sisep.ovh001.eynes.com.ar/sisep/soe/interview/".concat(i),a);case 4:e.sent;case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.i,{style:{paddingLeft:"3%",paddingTop:t?"0%":"5%",height:t?"220px":"",zIndex:t?9999:999}},r.a.createElement(d.b,{xs:6,style:{display:"flex",flexDirection:"column",textAlign:"center",paddingLeft:"0px",paddingRight:"2px",maxHeight:"150px",marginBottom:t?"":"6%"}},r.a.createElement("video",{width:"100%",height:t?"100%":"378px",playsInline:!0,ref:g,autoPlay:!0,style:{borderRadius:"1%"}}),r.a.createElement("span",{style:{fontWeight:"bold",color:"#4a4a4a"}},a?o:c)),O.isReceivingCall&&!p&&a?r.a.createElement(d.b,{sm:6},r.a.createElement("div",{style:{display:"flex",marginTop:"10%",alignItems:"center",flexDirection:"column",transition:"500ms"}},r.a.createElement("h3",{style:{color:"#4a4a4a",textAlign:"center"}},c," ha solicitado entrar a la llamada"),r.a.createElement(d.a,{style:{width:"25%"},color:"primary",onClick:function(){return I()}},"Habilitar"))):!p&&r.a.createElement(d.b,{sm:6},r.a.createElement("div",{style:{display:"flex",marginTop:"10%",alignItems:"center",flexDirection:"column",transition:"500ms"}},r.a.createElement("h3",{style:{color:"#4a4a4a",textAlign:"center"}},a?"Esperando al cantidado...":"Esperando al entrevistador..."),r.a.createElement("div",{className:"loader"}))),p&&!v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{xs:6,style:{display:"flex",flexDirection:"column",textAlign:"center",paddingLeft:"2px",paddingRight:"0px",maxHeight:"150px"}},r.a.createElement("video",{width:"100%",height:t?"100%":"378px",playsInline:!0,ref:b,autoPlay:!0,style:{borderRadius:"1%"}}),r.a.createElement("span",{style:{fontWeight:"bold",color:"#4a4a4a"}},a?c:o),r.a.createElement(d.a,{color:"danger",onClick:function(){a?S(!x):window.location.reload()},style:{width:"10%"}},r.a.createElement(f.a,{style:{transform:"rotate(90deg)"},icon:"fa-solid fa-phone-slash",size:"sm"})))),v&&r.a.createElement(d.b,{md:6,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"50%"}},r.a.createElement("h4",null,"La llamada ha terminado."))),r.a.createElement(V,{open:x,setOpen:S,guidOdoo:i})))},H=a(6),J=a(79),q=function(e){var t=e.open,a=e.setOpen,i=(e.isCodeInterview,e.setIsCodeInterview,e.isInterviewer,e.setIsInterviewer),o=e.interviewData,c=Object(n.useContext)(h),l=c.setName,s=c.callUser,m=Object(n.useState)({name:"",guidInterview:""}),p=Object(u.a)(m,2),f=p[0],g=p[1],b=Object(n.useState)(!1),v=Object(u.a)(b,2),E=v[0],O=v[1],w=function(){f.name===o.mail_interviewer&&(l(f.name),a(!t),i(!0)),f.name===o.mail_interviewed&&(l(f.name),s(f.name),a(!t)),f.name!==o.mail_interviewer&&f.name!==o.mail_interviewed&&O(!0)};return r.a.createElement(d.e,{isOpen:t,style:{paddingTop:"10%"}},r.a.createElement(d.f,null,r.a.createElement(d.i,null,r.a.createElement(d.b,{sm:12},r.a.createElement(d.d,{type:"text",value:f.name,autoComplete:"off",placeholder:"Ingrese su email",invalid:E,name:"name",onChange:function(e){g(Object(J.a)({},f,Object(H.a)({},e.target.name,e.target.value)))},onKeyUp:function(e){"Enter"===e.key&&w()}}),r.a.createElement(d.c,{style:{marginTop:"10px"}},"Email incorrecto"),!E&&r.a.createElement(L.a,{fontSize:"0.8rem",htmlColor:"#fafafa",sx:{opacity:"75%",marginTop:"10px"}},"Este campo es utilizado para validar su identidad")))),r.a.createElement(d.g,null,r.a.createElement(d.a,{color:"primary",onClick:function(){return w()},disabled:0===f.name.length},"Unirme ahora")))},G=function(e){var t=e.open;return r.a.createElement(d.e,{isOpen:t,style:{paddingTop:"10%"}},r.a.createElement(d.h,null,r.a.createElement(L.a,{fontWeight:"bold"},"Error")),r.a.createElement(d.f,null,r.a.createElement(d.i,null,r.a.createElement(d.b,{sm:12},r.a.createElement(L.a,{fontSize:"1.2rem"},"La URL a la que quiere ingresar no contiene un GUID para reconocer la entrevista."),r.a.createElement(L.a,{fontSize:"1.2rem",mt:2},"Por favor revise la direcci\xf3n ingresada.")))))};m.b.add(p.d);var W=function(){var e=new URLSearchParams(window.location.search).get("guid"),t=Object(n.useState)(!0),a=Object(u.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(!1),m=Object(u.a)(c,2),p=m[0],f=m[1],g=Object(n.useState)(!1),b=Object(u.a)(g,2),v=b[0],h=b[1],E=Object(n.useState)(!1),O=Object(u.a)(E,2),w=O[0],j=O[1],y=Object(n.useState)(null),x=Object(u.a)(y,2),S=x[0],I=x[1],C=Object(n.useState)(""),k=Object(u.a)(C,2),N=k[0],T=k[1],z=Object(n.useState)(""),A=Object(u.a)(z,2),D=A[0],F=A[1],R=function(){var t=Object(s.a)(l.a.mark(function t(){var a,n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",SoeToken:"Cwf8tVGv674@"},body:JSON.stringify({})},t.next=3,fetch("https://sisep.ovh001.eynes.com.ar/sisep/soe/interview/getinfo/".concat(e),a);case 3:return n=t.sent,t.next=6,n.json();case 6:if("nodata"!==(r=t.sent).result.status){t.next=9;break}return t.abrupt("return",f(!p));case 9:h(r.result.is_code),I(r.result),T(r.result.application_data[0]?r.result.application_data[0].create_uid[1]:""),F(r.result.application_data[0]?r.result.application_data[0].partner_name:""),console.log("get odoo",r);case 14:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)(function(){R()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.i,{style:{display:i&&"none",marginRight:"0px",position:"sticky",top:"40px",backgroundColor:"white",zIndex:999}},r.a.createElement(d.b,{sm:9},r.a.createElement(B,{isInterviewer:w,isCodeInterview:v,showInitialModal:i,guidOdoo:e,interviewerName:N,interviewedName:D})),r.a.createElement(d.b,{sm:3,style:{position:"fixed",right:"-10px"}},r.a.createElement(P,{isInterviewer:w,isCodeInterview:v,guidOdoo:e,interviewerName:N,interviewedName:D}))),v&&r.a.createElement(d.i,{style:{display:i&&"none",marginTop:"5%",marginRight:"0px",marginBottom:"3%"}},r.a.createElement(d.b,{sm:{offset:1,size:7}},r.a.createElement(_,{guidOdoo:e,isInterviewer:w}))),r.a.createElement(q,{open:i,setOpen:o,isCodeInterview:v,setIsCodeInterview:h,isInterviewer:w,setIsInterviewer:j,interviewData:S}),r.a.createElement(G,{open:p}))},K=(a(198),function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light p-0",style:{backgroundColor:"#275fb3",position:"fixed",width:"100%",zIndex:99999}},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-brand",style:{color:"#d5d2d2",fontWeight:"600"}},"SISEP"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"}))),t)});var Z=function(){return r.a.createElement(K,null,r.a.createElement(W,null))},X=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,228)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)})};a(200);a(101).config(),o.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null,r.a.createElement(Z,null)))),X()}},[[126,3,2]]]);
//# sourceMappingURL=main.bac9191f.chunk.js.map